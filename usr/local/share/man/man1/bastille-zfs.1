.Dd 2025/12/06
.Dt bastille-zfs 1
.Os
.Sh NAME
.Nm bastille zfs
.Nd Manage ZFS options/attributes for jail(s).
.Sh SYNOPSIS
.Nm Oo Fl avx Oc Ar TARGET Sy snapshot|destroy|rollback Op TAG
.Nm Oo Fl avx Oc Ar TARGET Sy df|usage
.Nm Oo Fl avx Oc Ar TARGET Sy get|set Ar KEY=VALUE
.Nm Oo Fl avx Oc Ar TARGET Sy jail Ar pool/dataset /jail/path
.Nm Oo Fl avx Oc Ar TARGET Sy unjail Ar pool/dataset
.Sh DESCRIPTION
The
.Nm
sub-command can manage snapshots, show disk usage, get or
set attributes for jail datasets and jail or unjail specified
datasets.
.Bl -tag -width Ds
.It Sy bastille zfs Oo Fl avx Oc Ar TARGET Sy snapshot|destroy|rollback Op TAG
.Bl -tag -width Ds
.It Sy snapshot
Create a snapshot for
.Ar TARGET .
.It Sy destroy
Destroy a snapshot for
.Ar TARGET .
.It Sy rollback
Rollback
.Ar TARGET
to last snapshot.
.It Fl a , Fl -auto
Auto mode. Start/stop jail(s) if required.
.It Fl v , Fl -verbose
Enable verbose mode.
.It Fl x , -debug
Enable debug mode.
.El
.Pp
If
.Ar TAG
is specified, Bastille will use it as the naming scheme for the snapshot.
Otherwise, Bastille will use its internal one.
.It Sy bastille zfs Oo Fl avx Oc Ar TARGET Sy df|usage
.Bl -tag -width Ds
.It Sy df
Show the space that
.Ar TARGET
datsets are using.
.It Sy usage
Same as 'df'.
.It Fl a , Fl -auto
Auto mode. Start/stop jail(s) if required.
.It Fl v , Fl -verbose
Enable verbose mode.
.It Fl x , -debug
Enable debug mode.
.El
.It Sy bastille zfs Oo Fl avx Oc Ar TARGET Sy get|set Ar KEY=VALUE
.Bl -tag -width Ds
.It Sy get
Get the
.Ar VALUE
for
.Ar KEY .
.It Sy set
Set the
.Ar VALUE
for
.Ar KEY .
.It Fl a , Fl -auto
Auto mode. Start/stop jail(s) if required.
.It Fl v , Fl -verbose
Enable verbose mode.
.It Fl x , -debug
Enable debug mode.
.El
.It Sy bastille zfs Oo Fl avx Oc Ar TARGET Sy jail Ar pool/dataset /jail/path
.Bl -tag -width Ds
.It Sy jail
Jail the specified dataset, and mount it at the
specified mount point inside the jail. Make sure
to unjail any jailed datasets before attempting to
destroy a jail.
.It Fl a , Fl -auto
Auto mode. Start/stop jail(s) if required.
.It Fl v , Fl -verbose
Enable verbose mode.
.It Fl x , -debug
Enable debug mode.
.El
.It Sy bastille zfs Oo Fl avx Oc Ar TARGET Sy unjail Ar pool/dataset
.Bl -tag -width Ds
.It Sy unjail
Unjail the specified dataset.
.It Fl a , Fl -auto
Auto mode. Start/stop jail(s) if required.
.It Fl v , Fl -verbose
Enable verbose mode.
.It Fl x , -debug
Enable debug mode.
.El
.Sh EXAMPLES
.Bl -tag -width Ds
.It Take a snapshot of myjail:
.Sy bastille zfs myjail snapshot
.It Jail zroot/data in myjail at /my/data:
.Sy bastille zfs myjail jail zroot/data /my/data
.It Get the value of 'mounted' for myjail:
.Sy bastille zfs myjail get mounted
.Sh SEE ALSO
.Xr bastille.conf 5 ,
.Xr bastille-bootstrap 1 ,
.Xr bastille-clone 1 ,
.Xr bastille-cmd 1 ,
.Xr bastille-config 1 ,
.Xr bastille-console 1 ,
.Xr bastille-convert 1 ,
.Xr bastille-cp 1 ,
.Xr bastille-create 1 ,
.Xr bastille-destroy 1 ,
.Xr bastille-edit 1 ,
.Xr bastille-etcupdate 1 ,
.Xr bastille-export 1 ,
.Xr bastille-htop 1 ,
.Xr bastille-import 1 ,
.Xr bastille-jcp 1 ,
.Xr bastille-limits 1 ,
.Xr bastille-list 1 ,
.Xr bastille-migrate 1 ,
.Xr bastille-mount 1 ,
.Xr bastille-network 1 ,
.Xr bastille-pkg 1 ,
.Xr bastille-rcp 1 ,
.Xr bastille-rdr 1 ,
.Xr bastille-rename 1 ,
.Xr bastille-restart 1 ,
.Xr bastille-service 1 ,
.Xr bastille-setup 1 ,
.Xr bastille-start 1 ,
.Xr bastille-stop 1 ,
.Xr bastille-sysrc 1 ,
.Xr bastille-tags 1 ,
.Xr bastille-template ,
.Xr bastille-top 1 ,
.Xr bastille-umount 1 ,
.Xr bastille-update 1 ,
.Xr bastille-upgrade 1 ,
.Xr bastille-verify 1