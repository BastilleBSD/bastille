.Dd December 12, 2025
.Dt bastille-monitor 8
.Os
.Sh NAME
.Nm bastille monitor
.Nd Monitor and attempt to restart jail service(s). 
.Sh SYNOPSIS
.Nm
.Op Fl x
.Nm
.Op Fl x
.Ar enable|disable|status
.Nm
.Op Fl x
.Ar TARGET
.Sy add|delete
.Ar SERVICE1,SERVICE2
.Nm
.Op Fl x
.Sy list
.Op SERVICE
.Sh DESCRIPTION
The
.Nm
sub-command will monitor jail services using the cron
mechanism. It will attempt to restart them if/when
they stop. See also
.Xr bastille.conf 5 .
.Bl -tag -width Ds
.It Sy bastille monitor Oo Fl x Oc Ar TARGET
.Bl -tag -width Ds
.It Fl x , Fl -debug
Enable debug mode.
.El
.Pp
Calling
.Nm
with only a
.Ar TARGET
is how we initiante the checking/restarting
of services. Any service(s) defined for
.Ar TARGET
will be restarted if they are stopped.
.It Sy bastille monitor Oo Fl x Oc Sy enable|disable|status 
.Bl -tag -width Ds
.It Sy enable
This will enable monitoring, adding a cron entry to be
executed every 5 minutes, or the duration set
in 'bastille_monitor_cron'. See
.Xr bastille.conf 5 .
.It Sy disable
Disable the monitoring function. This will remove the
cron entry.
.It Sy status
Check if the monitor is currently active or inactive.
.It Fl x , Fl -debug
Enable debug mode.
.El
.It Sy bastille monitor Oo Fl x Oc Ar TARGET Sy add|delete Ar SERVICE1,SERVICE2
.Bl -tag -width Ds
.It Sy add
Add the
.Ar SERVICE
to the list of services to be monitored.
.It Sy delete
Remove the
.Ar SERVICE
from the monitoring list.
.It Fl x , Fl -debug
Enable debug mode.
.El
.It Sy bastille monitor Oo Fl x Oc Ar TARGET Sy list Op SERVICE
.Bl -tag -width Ds
.It Sy list
List monitored service(s) for
.Ar TARGET .
If
.Ar SERVICE
is specified, list jail(s) that are monitoring that service.
Note that it will only list the jails given in
.Ar TARGET .
.It Fl x , Fl -debug
Enable debug mode.
.Sh EXAMPLES
.Bl -tag -width Ds
.It Enable the monitoring service:
.Sy bastille monitor enable
.It Add nginx to the monitor list for myjail:
.Sy bastille monitor myjail add nginx
.It Add nginx and caddy to the monitor list for myjail:
.Sy bastille monitor myjail add nginx,caddy
.It Check which jails are monitoring caddy:
.Sy bastille monitor ALL list caddy
.Sh SEE ALSO
.Xr bastille.conf 5 ,
.Xr bastille-bootstrap 8 ,
.Xr bastille-clone 8 ,
.Xr bastille-cmd 8 ,
.Xr bastille-config 8 ,
.Xr bastille-console 8 ,
.Xr bastille-convert 8 ,
.Xr bastille-cp 8 ,
.Xr bastille-create 8 ,
.Xr bastille-destroy 8 ,
.Xr bastille-edit 8 ,
.Xr bastille-etcupdate 8 ,
.Xr bastille-export 8 ,
.Xr bastille-htop 8 ,
.Xr bastille-import 8 ,
.Xr bastille-jcp 8 ,
.Xr bastille-limits 8 ,
.Xr bastille-list 8 ,
.Xr bastille-migrate 8 ,
.Xr bastille-mount 8 ,
.Xr bastille-network 8 ,
.Xr bastille-pkg 8 ,
.Xr bastille-rcp 8 ,
.Xr bastille-rdr 8 ,
.Xr bastille-rename 8 ,
.Xr bastille-restart 8 ,
.Xr bastille-service 8 ,
.Xr bastille-setup 8 ,
.Xr bastille-start 8 ,
.Xr bastille-stop 8 ,
.Xr bastille-sysrc 8 ,
.Xr bastille-tags 8 ,
.Xr bastille-template 8 ,
.Xr bastille-top 8 ,
.Xr bastille-umount 8 ,
.Xr bastille-update 8 ,
.Xr bastille-upgrade 8 ,
.Xr bastille-verify 8 ,
.Xr bastille-zfs 8
